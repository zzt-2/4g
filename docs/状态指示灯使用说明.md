# 状态指示灯使用说明（简化版）

## 功能概述

状态指示灯功能允许用户在HeaderBar中添加简单的状态指示器，当接收帧数据项的值等于指定值时，指示灯会显示对应的颜色。

## 功能特点

- **位置**: 显示在HeaderBar的标题和窗口操作按钮之间
- **简单配置**: 值匹配 + 自定义颜色 + 自定义标签
- **关联数据**: 与receiveFramesStore中的dataItems关联
- **配置位置**: 在系统设置页面进行配置

## 使用方法

### 1. 通过设置页面配置

1. 打开"系统设置"页面
2. 找到"状态指示灯配置"区域
3. 启用状态指示灯功能
4. 添加、编辑或删除指示灯

### 2. 配置指示灯

每个指示灯需要配置以下参数：

- **标签**: 指示灯的显示名称
- **关联数据项**: 选择要监控的数据分组和数据项
- **目标值**: 当数据项等于此值时，指示灯会亮起
- **颜色**: 选择指示灯的颜色（hex格式，如 #00ff00）

### 3. 通过代码使用

```typescript
import { useStatusIndicators } from '@/composables/useStatusIndicators';

const { isEnabled, indicators, addIndicator } = useStatusIndicators();

// 添加一个状态指示灯
const indicatorId = addIndicator({
  label: '设备状态',
  groupId: 1,
  dataItemId: 2,
  targetValue: '1',
  color: '#00ff00',
});
```

## 工作原理

状态指示灯采用简单的值匹配机制：

- 当数据项的值（转换为字符串）等于目标值时，指示灯亮起
- 指示灯亮起时显示配置的颜色
- 指示灯未激活时显示灰色

## 视觉效果

- **未激活状态**: 灰色圆形指示灯
- **激活状态**: 显示配置的颜色
- **标签**: 始终显示在指示灯旁边

## 配置示例

假设你有一个温度传感器数据项，当温度超过30度时希望红色指示灯亮起：

1. 标签: "高温警告"
2. 关联数据项: 选择温度传感器对应的分组和数据项
3. 目标值: "30"
4. 颜色: #ff0000

## 注意事项

1. **值匹配**: 使用字符串匹配，确保目标值格式与数据项的实际值格式一致
2. **数据项选择**: 确保选择的数据项确实会接收到数据
3. **颜色格式**: 使用hex格式颜色值（如 #ff0000）

## 故障排除

### 指示灯不亮起

1. 检查关联的数据项是否正在接收数据
2. 确认目标值是否与实际数据值完全匹配（包括大小写）
3. 确认状态指示灯功能已启用

### 配置丢失

状态指示灯配置保存在receiveFramesStore中，重新配置即可。
